# ุฏููู ุงุณุชุฎุฏุงู n8n ูู ูุดุฑูุน Smart Agency

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ **n8n** ุฅูู ุงููุดุฑูุน ูุฃุฏุงุฉ ูุฃุชูุชุฉ ุงูููุงู (Workflow Automation). ููููู ุงุณุชุฎุฏุงู n8n ูู:

- ๐ ุฃุชูุชุฉ ุงูููุงู ุงููุชูุฑุฑุฉ
- ๐ ุงูุฑุจุท ุจูู ุงูุฎุฏูุงุช ุงููุฎุชููุฉ (APIs, Databases, etc.)
- ๐ง ุฅุฑุณุงู ุฑุณุงุฆู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุชููุงุฆูุงู
- ๐ ุฌูุน ููุนุงูุฌุฉ ุงูุจูุงูุงุช
- ๐ค ุฅูุดุงุก Webhooks ู Chatbots
- ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ!

## ๐๏ธ ุงูุจููุฉ ุงูุชุญุชูุฉ

ุชู ุฅุถุงูุฉ ุงูุฎุฏูุงุช ุงูุชุงููุฉ:

1. **n8n**: ุฎุฏูุฉ ุฃุชูุชุฉ ุงูููุงู ุงูุฑุฆูุณูุฉ (Port: 5678)
2. **n8n-postgres**: ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ูุญูุธ ุงูุจูุงูุงุช
3. **Volumes**: ููุงุญุชูุงุธ ุจุงูุจูุงูุงุช ุจุดูู ุฏุงุฆู

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### 1. ุชุดุบูู ุงูุฎุฏูุงุช

```bash
# ุชุดุบูู ุฌููุน ุงูุฎุฏูุงุช (ุจูุง ูู ุฐูู n8n)
docker-compose up -d

# ุชุดุบูู n8n ููุท
docker-compose up -d n8n
```

### 2. ุงููุตูู ุฅูู n8n

ุจุนุฏ ุงูุชุดุบููุ ุงูุชุญ ุงููุชุตูุญ ุนูู ุงูุนููุงู:

```
http://localhost:5678
```

ุณุชุทูุจ ููู n8n ุชุณุฌูู ุงูุฏุฎูู:
- **Username**: `admin` (ูู ุจุชุบููุฑู ูู `.env.n8n`)
- **Password**: `admin_password_change_me` (โ๏ธ ูุฌุจ ุชุบููุฑู!)

### 3. ุงูุชุญูู ูู ุงูุญุงูุฉ

```bash
# ุนุฑุถ ุณุฌูุงุช n8n
docker-compose logs -f n8n

# ุงูุชุญูู ูู ุญุงูุฉ ุงูุฎุฏูุงุช
docker-compose ps
```

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

### ุชุบููุฑ ูููุงุช ุงููุฑูุฑ (ููู ุฌุฏุงู!)

ูุจู ุงููุดุฑ ูู ุงูุฅูุชุงุฌุ ูุฌุจ ุชุบููุฑ ูููุงุช ุงููุฑูุฑ ูู ููู `docker-compose.yml`:

1. **ูููุฉ ูุฑูุฑ PostgreSQL**:
   ```yaml
   - POSTGRES_PASSWORD=n8n_password_change_me  # ุบูุฑ ูุฐุง
   ```

2. **ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ูู n8n**:
   ```yaml
   - N8N_BASIC_AUTH_USER=admin  # ุบูุฑ ุงุณู ุงููุณุชุฎุฏู
   - N8N_BASIC_AUTH_PASSWORD=admin_password_change_me  # ุบูุฑ ูููุฉ ุงููุฑูุฑ
   ```

### ุงุณุชุฎุฏุงู HTTPS ูู ุงูุฅูุชุงุฌ

ููุงุณุชุฎุฏุงู ูุน ูุทุงู ุฎุงุต (Domain)ุ ุบูุฑ ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ:

```yaml
- N8N_PROTOCOL=https
- N8N_HOST=your-domain.com
- WEBHOOK_URL=https://your-domain.com/
```

## ๐ ุฃูุซูุฉ ุนูู ุงุณุชุฎุฏุงูุงุช n8n

### ูุซุงู 1: ุฅุฑุณุงู ุฅุดุนุงุฑ ุนูุฏ ุฅุถุงูุฉ ูุดุชุฑู ุฌุฏูุฏ

1. ุงูุชุญ n8n ูุงุถุบุท ุนูู "New Workflow"
2. ุฃุถู Webhook Node ูุงุณุชูุจุงู ุงูุจูุงูุงุช ูู Backend
3. ุฃุถู Email Node ูุฅุฑุณุงู ุฅุดุนุงุฑ
4. ูุนูู Workflow ูุงุญุตู ุนูู URL ุงูุฎุงุต ุจู Webhook
5. ุงุณุชุฎุฏู ูุฐุง URL ูู Backend ููุฅุฑุณุงู

### ูุซุงู 2: ุฌุฏููุฉ ูุณุฎ ุงุญุชูุงุทู ููุจูุงูุงุช

1. ุฃุถู Cron Node ูุชุญุฏูุฏ ุงูุชูููุช
2. ุฃุถู HTTP Request Node ููุงุชุตุงู ุจู Backend
3. ุฃุถู Google Drive Node ูุญูุธ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

## ๐ง ุงูุฃูุงูุฑ ุงููููุฏุฉ

```bash
# ุฅููุงู n8n
docker-compose stop n8n

# ุฅุนุงุฏุฉ ุชุดุบูู n8n
docker-compose restart n8n

# ุญุฐู ุงูุจูุงูุงุช ูุงูุจุฏุก ูู ุฌุฏูุฏ
docker-compose down -v
docker volume rm smart-agency_n8n-data smart-agency_n8n-postgres-data

# ุนุฑุถ ูุนูููุงุช n8n Container
docker inspect n8n

# ุงูุฏุฎูู ุฅูู n8n Container
docker exec -it n8n /bin/sh
```

## ๐ ุงูุจูุงูุงุช ูุงููุณุฎ ุงูุงุญุชูุงุทู

### ููุงูุน ุงูุจูุงูุงุช

ุงูุจูุงูุงุช ูุญููุธุฉ ูู Volumes ุงูุชุงููุฉ:
- `n8n-data`: workflows ูุงูุฅุนุฏุงุฏุงุช
- `n8n-postgres-data`: ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ูุณุฎ ุงุญุชูุงุทู

```bash
# ูุณุฎ ุงุญุชูุงุทู ููุจูุงูุงุช
docker run --rm -v smart-agency_n8n-data:/data -v $(pwd):/backup alpine tar czf /backup/n8n-backup.tar.gz -C /data .

# ุงุณุชุนุงุฏุฉ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
docker run --rm -v smart-agency_n8n-data:/data -v $(pwd):/backup alpine tar xzf /backup/n8n-backup.tar.gz -C /data
```

## ๐ ุงูุฑุจุท ูุน Backend

ูุงุณุชุฏุนุงุก n8n Webhooks ูู Backend ุงูุฎุงุต ุจู:

```typescript
// ูู Backend - ุฅุฑุณุงู ุจูุงูุงุช ุฅูู n8n
const axios = require('axios');

async function sendToN8N(data: any) {
  const webhookUrl = 'http://n8n:5678/webhook/your-webhook-id';
  
  try {
    const response = await axios.post(webhookUrl, data);
    console.log('Sent to n8n:', response.data);
  } catch (error) {
    console.error('Error sending to n8n:', error);
  }
}
```

## ๐ ุงูููุงุฑุฏ ูุงูุชุนูู

- [ุงููููุน ุงูุฑุณูู](https://n8n.io)
- [ุงูุชูุซูู ุงูุฑุณูู](https://docs.n8n.io)
- [ุฃูุซูุฉ Workflows](https://n8n.io/workflows)
- [ุงูููุงุฉ ุนูู YouTube](https://www.youtube.com/c/n8n-io)
- [ุงููุฌุชูุน](https://community.n8n.io)

## ๐ก๏ธ ุงูุฃูุงู

### ูุตุงุฆุญ ุงูุฃูุงู:

1. โ ุบูุฑ ุฌููุน ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ
2. โ ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ
3. โ ูู ุจุชุญุฏูุซ ุงูุตูุฑุฉ (image) ุจุงูุชุธุงู
4. โ ููุฏ ุงููุตูู ุฅูู n8n (Firewall/Network policies)
5. โ ูู ุจุนูู ูุณุฎ ุงุญุชูุงุทูุฉ ุฏูุฑูุฉ

### ุชุญุฏูุซ n8n

```bash
# ุณุญุจ ุฃุญุฏุซ ุฅุตุฏุงุฑ
docker-compose pull n8n

# ุฅุนุงุฏุฉ ุงูุชุดุบูู ูุน ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ
docker-compose up -d n8n
```

## โ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### n8n ูุง ูุนููุ

1. ุชุญูู ูู ุงูุณุฌูุงุช:
   ```bash
   docker-compose logs n8n
   ```

2. ุชุญูู ูู PostgreSQL:
   ```bash
   docker-compose logs n8n-postgres
   ```

3. ุชุญูู ูู ุงูุดุจูุฉ:
   ```bash
   docker network inspect web-network
   ```

### ูุง ูููู ุงููุตูู ุฅูู n8nุ

- ุชุฃูุฏ ูู ุชุดุบูู Container: `docker ps | grep n8n`
- ุชุญูู ูู Port 5678: `netstat -ano | findstr :5678`
- ุชุญูู ูู Firewall Settings

## ๐ ููุงุญุธุงุช

- n8n ูุนูู ุนูู Port **5678** ุงูุชุฑุงุถูุงู
- ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL ุชุณุชุฎุฏู Port ุงูุฏุงุฎูู 5432 (ุบูุฑ ูุนุฑุถ ููุฎุงุฑุฌ)
- ุงูููุทูุฉ ุงูุฒูููุฉ ูุถุจูุทุฉ ุนูู `Asia/Riyadh`
- ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ูู Volumes ุฏุงุฆูุฉ

---

ุชู ุชุญุฏูุซ ูุฐุง ุงูููู ูู: 2025-12-22
